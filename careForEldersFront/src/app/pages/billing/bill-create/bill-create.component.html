<!-- src/app/pages/billing/bill-create/bill-create.component.html -->
<div class="bill-create-container">
    <h2>Create New Bill</h2>
    
    <form [formGroup]="billForm" (ngSubmit)="onSubmit()">
      <!-- Patient Selection -->
      <div class="form-group">
        <label>Patient ID</label>
        <input type="number" formControlName="patientId" class="form-control">
        <div *ngIf="billForm.get('patientId')?.invalid && billForm.get('patientId')?.touched" class="error">
          Patient ID is required
        </div>
      </div>
  
      <!-- Bill Type -->
      <div class="form-group">
        <label>Bill Type</label>
        <select formControlName="type" class="form-control">
          <option value="">Select a bill type</option>
          <option *ngFor="let type of billTypes" [value]="type">{{type}}</option>
        </select>
        <div *ngIf="billForm.get('type')?.invalid && billForm.get('type')?.touched" class="error">
          Bill type is required
        </div>
      </div>
  
      <!-- Due Date -->
      <div class="form-group">
        <label>Due Date</label>
        <input type="date" formControlName="dueDate" class="form-control">
        <div *ngIf="billForm.get('dueDate')?.invalid && billForm.get('dueDate')?.touched" class="error">
          Due date is required
        </div>
      </div>
  
      <!-- Bill Items -->
      <div class="items-section">
        <h3>Bill Items</h3>
        <div formArrayName="items">
          <div *ngFor="let item of items.controls; let i = index" [formGroupName]="i" class="item-row">
            <div class="form-group">
              <label>Description</label>
              <input type="text" formControlName="description" class="form-control">
            </div>
            
            <div class="form-group">
              <label>Quantity</label>
              <input type="number" formControlName="quantity" class="form-control">
            </div>
            
            <div class="form-group">
              <label>Unit Price</label>
              <input type="number" step="0.01" formControlName="unitPrice" class="form-control">
            </div>
            
            <button type="button" (click)="removeItem(i)" class="remove-item-btn">Ã—</button>
          </div>
        </div>
        <button type="button" (click)="addItem()" class="add-item-btn">+ Add Item</button>
      </div>
  
      <!-- Payment Method -->
      <div class="form-group">
        <label>Payment Method</label>
        <select formControlName="paymentMethod" class="form-control">
          <option value="">Select payment method</option>
          <option *ngFor="let method of paymentMethods" [value]="method">{{method}}</option>
        </select>
      </div>
  
      <!-- Notes -->
      <div class="form-group">
        <label>Notes</label>
        <textarea formControlName="notes" class="form-control" rows="3"></textarea>
      </div>
  
      <!-- Total Amount -->
      <div class="total-amount">
        <strong>Total Amount:</strong> {{ calculateTotal() | currency }}
      </div>
  
      <!-- Form Actions -->
      <div class="form-actions">
        <button type="submit" class="btn btn-primary" [disabled]="billForm.invalid || isSubmitting">
          <span *ngIf="!isSubmitting">Create Bill</span>
          <span *ngIf="isSubmitting">Creating...</span>
        </button>
        <button type="button" class="btn btn-secondary" (click)="router.navigate(['/billing/bills'])">
          Cancel
        </button>
      </div>
    </form>
  </div>