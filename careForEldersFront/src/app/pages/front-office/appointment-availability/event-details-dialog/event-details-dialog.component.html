<h2 mat-dialog-title>
  {{ data.meta?.type === 'reservation' ? 'Appointment Details' : 'Availability Slot Details' }}
</h2>

<mat-dialog-content>
  <p><strong>Start:</strong> {{ data.start | date: 'short' }}</p>
  <p><strong>End:</strong> {{ data.end | date: 'short' }}</p>

  <div *ngIf="data.meta?.type === 'reservation'">
    <p><strong>Status:</strong> {{ data.meta?.status }}</p>
    <p><strong>Meeting Link:</strong> {{ data.meta?.meetingLink || 'N/A' }}</p>
    <p><strong>Type:</strong> {{ data.meta?.data?.reservationType }}</p>
  </div>

  <div *ngIf="data.meta?.type === 'availability'">
    <p><strong>Duration:</strong> {{ data.meta?.slotDuration }} min</p>
    <p><strong>Slot ID:</strong> {{ data.meta?.data?.id }}</p>
  
    <!-- Show Booked button if isBooked is true -->
    <button mat-raised-button color="warn" disabled *ngIf="data.meta?.isBooked">
      Booked
    </button>
    <!-- Show Book button if not booked -->
    <button mat-flat-button color="primary"
            *ngIf="!data.meta?.isBooked"
            (click)="bookSlot(data.meta.data)">
      Book
    </button>
  </div>
</mat-dialog-content>

<!-- Only show Start Video Call if not in the past and meetingLink exists -->
<button
  *ngIf="data.meta?.meetingLink && !data.meta?.isPast"
  mat-button
  (click)="startCall(data.meta.meetingLink)">
  Start Video Call
</button>

<mat-dialog-actions align="end">
  <button mat-button (click)="close()">Close</button>
  <!-- Update button: only for reservation and not past -->
  <button
    mat-flat-button
    color="primary"
    (click)="onUpdate()"
    *ngIf="data.meta?.type === 'reservation' && !data.meta?.isPast"
  >
    Update
  </button>
  <button
    *ngIf="showGoToPayments"
    mat-stroked-button
    color="accent"
    (click)="goToPayments()"
  >
    Go to Payments
  </button>
</mat-dialog-actions>