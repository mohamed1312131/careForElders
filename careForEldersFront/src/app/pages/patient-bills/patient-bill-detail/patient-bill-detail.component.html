<!-- src/app/features/patient-bills/patient-bill-detail/patient-bill-detail.component.html -->
<div class="patient-bill-detail-container">
    <div class="header">
      <button class="btn-back" (click)="goBack()">
        <i class="fas fa-arrow-left"></i> Back to Bills
      </button>
      <button *ngIf="patientBill" class="btn-primary" (click)="editBill()">
        <i class="fas fa-edit"></i> Edit Bill
      </button>
    </div>
  
    <div *ngIf="error" class="error-message">
      {{ error }}
    </div>
  
    <div *ngIf="loading" class="loading-container">
      <app-loading-spinner></app-loading-spinner>
    </div>
  
    <div *ngIf="!loading && patientBill" class="bill-details">
      <div class="bill-header">
        <div class="bill-info">
          <h1>Bill #{{ patientBill.billNumber }}</h1>
          <div class="status-badge" [ngClass]="getStatusClass()">
            {{ patientBill.status }}
          </div>
        </div>
        <div class="bill-dates">
          <div class="date-item">
            <span class="label">Bill Date:</span>
            <span class="value">{{ patientBill.billDate | date:'mediumDate' }}</span>
          </div>
          <div class="date-item">
            <span class="label">Due Date:</span>
            <span class="value">{{ patientBill.dueDate | date:'mediumDate' }}</span>
          </div>
        </div>
      </div>
  
      <div class="bill-sections">
        <div class="patient-info section">
          <h2>Patient Information</h2>
          <div class="info-content">
            <p><strong>Patient ID:</strong> {{ patientBill.patientId }}</p>
            <p><strong>Name:</strong> {{ patientBill.patientName }}</p>
          </div>
        </div>
  
        <div class="bill-items section">
          <h2>Bill Items</h2>
          <table class="items-table">
            <thead>
              <tr>
                <th>Description</th>
                <th>Service Type</th>
                <th>Service Date</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Amount</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of patientBill.items">
                <td>{{ item.description }}</td>
                <td>{{ item.serviceType }}</td>
                <td>{{ item.serviceDate | date:'mediumDate' }}</td>
                <td>{{ item.quantity }}</td>
                <td>{{ item.unitPrice | currency }}</td>
                <td>{{ item.amount | currency }}</td>
              </tr>
            </tbody>
          </table>
        </div>
  
        <div class="bill-summary section">
          <h2>Bill Summary</h2>
          <div class="summary-content">
            <div class="summary-row">
              <span>Total Amount:</span>
              <span>{{ patientBill.totalAmount | currency }}</span>
            </div>
            <div class="summary-row">
              <span>Paid Amount:</span>
              <span>{{ patientBill.paidAmount | currency }}</span>
            </div>
            <div class="summary-row total">
              <span>Balance:</span>
              <span>{{ calculateBalance() | currency }}</span>
            </div>
          </div>
        </div>
  
        <div *ngIf="patientBill.notes" class="notes section">
          <h2>Notes</h2>
          <p>{{ patientBill.notes }}</p>
        </div>
      </div>
    </div>
  </div>